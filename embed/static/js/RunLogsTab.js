(this.webpackJsonpui_v2=this.webpackJsonpui_v2||[]).push([[11],{1506:function(n,t,e){},1549:function(n,t,e){"use strict";e.r(t),e.d(t,"LogsLastRequestEnum",(function(){return y}));var r=e(0),o=e.n(r),l=e(65),i=e(265),u=e(13),a=e.n(u),s=e(280),c=e(282),d=e(8),v=e(383),f=e(3),b=e(15),g=e(71),p=e(819),h=e(11);const m={fg:"#FFF",bg:"#000",newline:!1,colors:function(){const n={0:"#000",1:"#A00",2:"#0A0",3:"#A50",4:"#00A",5:"#A0A",6:"#0AA",7:"#AAA",8:"#555",9:"#F55",10:"#5F5",11:"#FF5",12:"#55F",13:"#F5F",14:"#5FF",15:"#FFF"};return l.a.range(0,6).forEach((t=>{l.a.range(0,6).forEach((e=>{l.a.range(0,6).forEach((r=>function(n,t,e,r){const o=n>0?40*n+55:0,l=t>0?40*t+55:0,i=e>0?40*e+55:0;r[16+36*n+6*t+e]=function(n){const t=[];for(const e of n)t.push(x(e));return"#"+t.join("")}([o,l,i])}(t,e,r,n)))}))})),l.a.range(0,24).forEach((t=>{const e=t+232,r=x(10*t+8);n[e]="#"+r+r+r})),n}()};function x(n){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t}function L(n,t,e,r){let o;if("text"===t)o=e;else if("display"===t)o=function(n,t,e){t=parseInt("".concat(t),10);const r={"-1":()=>"<br/>",0:()=>n.length&&E(n),1:()=>j(n,"b"),3:()=>j(n,"i"),4:()=>j(n,"u"),8:()=>O(n,"display:none"),9:()=>j(n,"strike"),22:()=>O(n,"font-weight:normal;text-decoration:none;font-style:normal"),23:()=>F(n,"i"),24:()=>F(n,"u"),39:()=>A(n,e.fg),49:()=>I(n,e.bg),53:()=>O(n,"text-decoration:overline")};if(r[t])return r[t]();if(4<t&&t<7)return j(n,"blink");var o,l,i,u;if(29<t&&t<38)return A(n,null===e||void 0===e||null===(o=e.colors)||void 0===o?void 0:o[t-30]);if(39<t&&t<48)return I(n,null===e||void 0===e||null===(l=e.colors)||void 0===l?void 0:l[t-40]);if(89<t&&t<98)return A(n,null===e||void 0===e||null===(i=e.colors)||void 0===i?void 0:i[t-90+8]);if(99<t&&t<108)return I(n,null===e||void 0===e||null===(u=e.colors)||void 0===u?void 0:u[t-100+8])}(n,+e,r);else if("xterm256Foreground"===t){var l;o=A(n,null===r||void 0===r||null===(l=r.colors)||void 0===l?void 0:l[+e])}else if("xterm256Background"===t){var i;o=I(n,null===r||void 0===r||null===(i=r.colors)||void 0===i?void 0:i[+e])}else"rgb"===t&&(o=function(n,t){const e=+(t=t.substring(2).slice(0,-1)).substr(0,2),r=t.substring(5).split(";").map((function(n){return("0"+Number(n).toString(16)).substring(-2)})).join("");return O(n,(38===e?"color:#":"background-color:#")+r)}(n,e));return o}function E(n){const t=n.slice(0);return n.length=0,t.reverse().map((function(n){return"</"+n+">"})).join("")}function j(n,t,e){return e||(e=""),n.push(t),"<".concat(t).concat(e?' style="'.concat(e,'"'):"",">")}function O(n,t){return j(n,"span",t)}function A(n,t){return j(n,"span","color:"+t)}function I(n,t){return j(n,"span","background-color:"+t)}function F(n,t){let e;if(n.slice(-1)[0]===t&&(e=n.pop()),e)return"</"+t+">"}var T=function(n,t){n="string"===typeof n?[n]:n;let e=Object.assign({},m,t),r=[];const o=[];return function(n,t,e){let r=!1;function o(){return""}function l(n){return t.newline?e("display",-1):e("text",n),""}const i=[{pattern:/^\x08+/,sub:o},{pattern:/^\x1b\[[012]?K/,sub:o},{pattern:/^\x1b\[\(B/,sub:o},{pattern:/^\x1b\[[34]8;2;\d+;\d+;\d+m/,sub:function(n){return e("rgb",n),""}},{pattern:/^\x1b\[38;5;(\d+)m/,sub:function(n,t){return e("xterm256Foreground",t),""}},{pattern:/^\x1b\[48;5;(\d+)m/,sub:function(n,t){return e("xterm256Background",t),""}},{pattern:/^\n/,sub:l},{pattern:/^\r+\n/,sub:l},{pattern:/^\r/,sub:l},{pattern:/^\x1b\[((?:\d{1,3};?)+|)m/,sub:function(n,t){r=!0,0===t.trim().length&&(t="0");const o=t.trimRight().split(";");for(const r of o)e("display",r);return""}},{pattern:/^\x1b\[\d?J/,sub:o},{pattern:/^\x1b\[\d{0,3};\d{0,3}f/,sub:o},{pattern:/^\x1b\[?[\d;]{0,3}/,sub:o},{pattern:/^(([^\x1b\x08\r\n])+)/,sub:function(n){return e("text",n),""}}];function u(t,e){e>3&&r||(r=!1,n=n.replace(t.pattern,t.sub))}const a=[];let{length:s}=n;n:for(;s>0;){for(let t=0,e=0,r=i.length;e<r;t=++e)if(u(i[t],t),n.length!==s){s=n.length;continue n}if(n.length===s)break;a.push(0),s=n.length}}(n.join(""),e,((n,t)=>{const l=L(r,n,"".concat(t),e);l&&o.push(l)})),r.length&&o.push(E(r)),o.join("")},D=e(1);function R(n){var t,e;let{index:r,style:o,data:l}=n;return Object(D.jsx)("div",{style:o,children:Object(D.jsx)("pre",{className:"LogRow__line",dangerouslySetInnerHTML:{__html:T(null!==(t=null===(e=l.logsList)||void 0===e?void 0:e[r-1])&&void 0!==t?t:"")}})})}R.displayName="RunLogsTab";var S=o.a.memo(R);let y;!function(n){n.DEFAULT="default",n.LIVE_UPDATE="live-update",n.LOAD_MORE="load-more"}(y||(y={}));e(1506);function _(n){var t,e;let{isRunLogsLoading:r,runHash:u,runLogs:m,inProgress:x,updatedLogsCount:L}=n;const E=o.a.useRef(null),j=o.a.useRef(null),O=o.a.useRef({}),A=o.a.useRef({}),I=o.a.useRef(null),[F,T]=o.a.useState(y.DEFAULT),[R,_]=o.a.useState(g.a.Ok),k=o.a.useRef([0,0]),[N,w]=o.a.useState(null),[U,P]=o.a.useState(null),[H,V]=o.a.useState(0),[B,M]=o.a.useState(0),[z,C]=o.a.useState(null);function J(){var n,t;T(y.LIVE_UPDATE),W({runHash:u,record_range:I.current?"".concat((null===(n=k.current)||void 0===n?void 0:n[1])>5?(null===(t=k.current)||void 0===t?void 0:t[1])-5:0,":"):""})}function W(n){_(g.a.Pending),A.current=p.a.getRunLogs(n),A.current.call().then((()=>{_(g.a.Ok),q(),function(){if(x){const n=window.setTimeout(J,3e3);E.current={intervalId:n}}}()}))}function q(){var n;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e;(t||F===y.LIVE_UPDATE)&&(null===(e=A.current)||void 0===e||e.abort());(null===(n=E.current)||void 0===n?void 0:n.intervalId)&&clearInterval(E.current.intervalId)}return o.a.useEffect((()=>(W({runHash:u}),h.a(b.a.runDetails.tabs.logs.tabView),()=>{q(!0)})),[]),o.a.useEffect((()=>{x||q()}),[x]),o.a.useEffect((()=>{const n=l.a.sortBy(Object.values(null!==m&&void 0!==m?m:{}),"index"),t=l.a.sortBy(n.map((n=>+n.index))),e=Array(3).fill("");k.current=[t[0],t[t.length-1]],C(t),I.current=n.map((n=>n.value)).concat(e)}),[m]),o.a.useEffect((()=>{var n,t;const e=null!==(n=null===(t=I.current)||void 0===t?void 0:t.length)&&void 0!==n?n:0;var r,o;if(F===y.LOAD_MORE&&U)null===(r=O.current)||void 0===r||null===(o=r.scrollToItem)||void 0===o||o.call(r,U.visibleStartIndex+L,"start"),T(y.DEFAULT);else if(F===y.LIVE_UPDATE&&U&&(null===U||void 0===U?void 0:U.visibleStopIndex)+L>=e-1||F===y.DEFAULT){var i,u;if(!l.a.isEmpty(z))null===(i=O.current)||void 0===i||null===(u=i.scrollToItem)||void 0===u||u.call(i,e,"end")}else{var a,s,c;null===(a=O.current)||void 0===a||null===(s=a.scrollToItem)||void 0===s||s.call(a,null!==(c=null===U||void 0===U?void 0:U.visibleStartIndex)&&void 0!==c?c:0,"start")}}),[I.current,z]),o.a.useEffect((()=>{var n,t,e;F===y.DEFAULT&&H&&B&&(l.a.isEmpty(z)||null===(n=O.current)||void 0===n||null===(t=n.scrollToItem)||void 0===t||t.call(n,null!==(e=null===U||void 0===U?void 0:U.visibleStartIndex)&&void 0!==e?e:0,"start"))}),[H,B]),Object(s.c)((()=>{j.current&&(V(j.current.offsetHeight),M(j.current.offsetWidth))}),j),Object(D.jsx)(d.a,{children:Object(D.jsx)(c.a,{isLoading:r&&F===y.DEFAULT,className:"RunDetailTabLoader",height:"100%",children:l.a.isEmpty(m)||l.a.isEmpty(z)||l.a.isNil(I.current)?Object(D.jsx)(v.a,{size:"xLarge",className:"RunDetailTabLoader",title:"No Logs"}):Object(D.jsx)("div",{className:"RunDetailLogsTabWrapper",children:Object(D.jsx)("div",{className:"RunDetailLogsTab",children:Object(D.jsx)("div",{className:"Logs",ref:j,children:Object(D.jsxs)("div",{className:"Logs__wrapper",children:[Object(D.jsx)(i.d,{ref:O,height:H||100,itemCount:(null===(t=I.current)||void 0===t?void 0:t.length)+1,itemSize:()=>15,width:"100%",overscanCount:100,initialScrollOffset:null!==N&&void 0!==N?N:15*(null===(e=I.current)||void 0===e?void 0:e.length),onItemsRendered:function(n){let{visibleStartIndex:t,visibleStopIndex:e}=n;P({visibleStartIndex:t,visibleStopIndex:e})},itemData:{logsList:I.current},onScroll:function(n){let{scrollOffset:t,scrollDirection:e}=n;var r,o,l;w(t),t<=15&&z&&0!==z[0]&&"backward"===e&&(R===g.a.Ok||R===g.a.Pending&&F===y.LIVE_UPDATE)&&(q(),T(y.LOAD_MORE),W({runHash:u,record_range:"".concat((null===(r=k.current)||void 0===r?void 0:r[0])>200?(null===(o=k.current)||void 0===o?void 0:o[0])-200:0,":").concat(null===(l=k.current)||void 0===l?void 0:l[0])}))},children:S},"".concat(H).concat(B)),Object(D.jsx)("div",{className:a()("overlay",{loading:r&&F===y.LOAD_MORE}),children:Object(D.jsx)(f.l,{size:24})})]})})})})})})}_.displayName="RunLogsTab";var k=o.a.memo(_);t.default=k}}]);